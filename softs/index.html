<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="git  git config 用户设置 安装完成后，还需要最后一步设置，在命令行输入： git config --global user.name &#34;Your Name&#34; git config --global user.email &#34;email@example.com&#34;
要随时掌握工作区的状态，使用git status命令。如果git status告诉你有文件被修改过，用git diff可以查看修改。 HEAD指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭。"><meta property="og:title" content><meta property="og:description" content="git  git config 用户设置 安装完成后，还需要最后一步设置，在命令行输入： git config --global user.name &#34;Your Name&#34; git config --global user.email &#34;email@example.com&#34;
要随时掌握工作区的状态，使用git status命令。如果git status告诉你有文件被修改过，用git diff可以查看修改。 HEAD指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭。"><meta property="og:type" content="website"><meta property="og:image" content="https://jieye-ericx.github.io/icon.png"><meta property="og:url" content="https://jieye-ericx.github.io/softs/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="git  git config 用户设置 安装完成后，还需要最后一步设置，在命令行输入： git config --global user.name &#34;Your Name&#34; git config --global user.email &#34;email@example.com&#34;
要随时掌握工作区的状态，使用git status命令。如果git status告诉你有文件被修改过，用git diff可以查看修改。 HEAD指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭。"><meta name=twitter:image content="https://jieye-ericx.github.io/icon.png"><title>ericx 's 数字花园</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://jieye-ericx.github.io//icon.png><link href=https://jieye-ericx.github.io/styles.80333fa2099c0bee674efa435fde378c.min.css rel=stylesheet><link href=https://jieye-ericx.github.io/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://jieye-ericx.github.io/js/darkmode.48459b7116d092b4e98d2cab704cad80.min.js></script>
<script src=https://jieye-ericx.github.io/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script defer src=https://jieye-ericx.github.io/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://jieye-ericx.github.io/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://jieye-ericx.github.io/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://jieye-ericx.github.io/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://jieye-ericx.github.io/",fetchData=Promise.all([fetch("https://jieye-ericx.github.io/indices/linkIndex.978b539fabc6a7a29a0ecd89a7f575a5.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://jieye-ericx.github.io/indices/contentIndex.e4f1617822572a37abb893fb2b9f5e7c.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://jieye-ericx.github.io",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://jieye-ericx.github.io",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/jieye-ericx.github.io\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=jieye-ericx.github.io src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://jieye-ericx.github.io/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://jieye-ericx.github.io/>ericx 's 数字花园</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><p class=meta>Last updated
Unknown
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/softs.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#git>git</a><ol><li><a href=#git-config-用户设置>git config 用户设置</a></li><li><a href=#git-init>git init</a></li><li><a href=#git-addrmmv-增加删除文件>git add/rm/mv 增加/删除文件</a></li><li><a href=#git-commit-代码提交>git commit 代码提交</a></li><li><a href=#git-branchcheckoutmerge-分支>git branch/checkout/merge 分支</a></li><li><a href=#git-tag-标签>git tag 标签</a></li><li><a href=#git-logstatus-查看历史>git log/status 查看历史</a></li><li><a href=#git-blamediffshow-变化>git blame/diff/show 变化</a></li><li><a href=#git-remotepullpush-远程>git remote/pull/push 远程</a></li><li><a href=#gitignore>.gitignore</a></li><li><a href=#底层数据结构和原理>底层数据结构和原理</a></li><li><a href=#提交规范>提交规范</a></li></ol></li><li><a href=#rpm>RPM</a><ol><li></li></ol></li><li><a href=#yum>yum</a></li><li><a href=#brew>brew</a><ol><li><a href=#安装>安装</a></li><li><a href=#基本用法>基本用法</a></li><li><a href=#brew-services>brew services</a></li><li><a href=#brew-services-服务相关配置以及日志路径>brew services 服务相关配置以及日志路径</a></li></ol></li><li><a href=#systemctl>systemctl</a><ol><li></li></ol></li><li><a href=#nohup>nohup</a></li></ol></nav></details></aside><a href=#git><h2 id=git><span class=hanchor arialabel=Anchor># </span>git</h2></a><p><img src=https://cdn.jsdelivr.net/gh/radoapx/rad-figure-bed/PicGo/blogs/linux-softs/20200514215135.png width=auto alt></p><a href=#git-config-用户设置><h3 id=git-config-用户设置><span class=hanchor arialabel=Anchor># </span>git config 用户设置</h3></a><p>安装完成后，还需要最后一步设置，在命令行输入：
<code>git config --global user.name "Your Name"</code>
<code>git config --global user.email "email@example.com"</code></p><p>要随时掌握工作区的状态，使用git status命令。如果git status告诉你有文件被修改过，用git diff可以查看修改。
HEAD指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 显示当前的Git配置</span>
</span></span><span class=line><span class=cl>$ git config --list
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 编辑Git配置文件</span>
</span></span><span class=line><span class=cl>$ git config -e <span class=o>[</span>--global<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 设置提交代码时的用户信息</span>
</span></span><span class=line><span class=cl>$ git config <span class=o>[</span>--global<span class=o>]</span> user.name <span class=s2>&#34;[name]&#34;</span>
</span></span><span class=line><span class=cl>$ git config <span class=o>[</span>--global<span class=o>]</span> user.email <span class=s2>&#34;[email address]&#34;</span>
</span></span></code></pre></td></tr></table></div></div><a href=#git-init><h3 id=git-init><span class=hanchor arialabel=Anchor># </span>git init</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 在当前目录新建一个Git代码库</span>
</span></span><span class=line><span class=cl>$ git init
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建一个目录，将其初始化为Git代码库</span>
</span></span><span class=line><span class=cl>$ git init <span class=o>[</span>project-name<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><a href=#git-addrmmv-增加删除文件><h3 id=git-addrmmv-增加删除文件><span class=hanchor arialabel=Anchor># </span>git add/rm/mv 增加/删除文件</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 添加指定文件到暂存区</span>
</span></span><span class=line><span class=cl>$ git add <span class=o>[</span>file1<span class=o>]</span> <span class=o>[</span>file2<span class=o>]</span> ...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 添加指定目录到暂存区，包括子目录</span>
</span></span><span class=line><span class=cl>$ git add <span class=o>[</span>dir<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 添加当前目录的所有文件到暂存区</span>
</span></span><span class=line><span class=cl>$ git add .
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 添加每个变化前，都会要求确认</span>
</span></span><span class=line><span class=cl><span class=c1># 对于同一个文件的多处变化，可以实现分次提交</span>
</span></span><span class=line><span class=cl>$ git add -p
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除工作区文件，并且将这次删除放入暂存区</span>
</span></span><span class=line><span class=cl>$ git rm <span class=o>[</span>file1<span class=o>]</span> <span class=o>[</span>file2<span class=o>]</span> ...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 停止追踪指定文件，但该文件会保留在工作区</span>
</span></span><span class=line><span class=cl>$ git rm --cached <span class=o>[</span>file<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 改名文件，并且将这个改名放入暂存区</span>
</span></span><span class=line><span class=cl>$ git mv <span class=o>[</span>file-original<span class=o>]</span> <span class=o>[</span>file-renamed<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><a href=#git-commit-代码提交><h3 id=git-commit-代码提交><span class=hanchor arialabel=Anchor># </span>git commit 代码提交</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># 提交暂存区到仓库区
</span></span><span class=line><span class=cl>$ git commit -m [message]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 提交暂存区的指定文件到仓库区
</span></span><span class=line><span class=cl>$ git commit [file1] [file2] ... -m [message]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 提交工作区自上次commit之后的变化，直接到仓库区
</span></span><span class=line><span class=cl>$ git commit -a
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 提交时显示所有diff信息
</span></span><span class=line><span class=cl>$ git commit -v
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 使用一次新的commit，替代上一次提交
</span></span><span class=line><span class=cl># 如果代码没有任何新变化，则用来改写上一次commit的提交信息
</span></span><span class=line><span class=cl>$ git commit --amend -m [message]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 重做上一次commit，并包括指定文件的新变化
</span></span><span class=line><span class=cl>$ git commit --amend [file1] [file2] ...
</span></span></code></pre></td></tr></table></div></div><a href=#git-branchcheckoutmerge-分支><h3 id=git-branchcheckoutmerge-分支><span class=hanchor arialabel=Anchor># </span>git branch/checkout/merge 分支</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 列出所有本地分支</span>
</span></span><span class=line><span class=cl>$ git branch
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 列出所有远程分支</span>
</span></span><span class=line><span class=cl>$ git branch -r
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 列出所有本地分支和远程分支</span>
</span></span><span class=line><span class=cl>$ git branch -a
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建一个分支，但依然停留在当前分支</span>
</span></span><span class=line><span class=cl>$ git branch <span class=o>[</span>branch-name<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建一个分支，指向指定commit</span>
</span></span><span class=line><span class=cl>$ git branch <span class=o>[</span>branch<span class=o>]</span> <span class=o>[</span>commit<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建一个分支，与指定的远程分支建立追踪关系</span>
</span></span><span class=line><span class=cl>$ git branch --track <span class=o>[</span>branch<span class=o>]</span> <span class=o>[</span>remote-branch<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建一个分支，并切换到该分支</span>
</span></span><span class=line><span class=cl>$ git checkout -b <span class=o>[</span>branch<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 切换到指定分支，并更新工作区</span>
</span></span><span class=line><span class=cl>$ git checkout <span class=o>[</span>branch-name<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 切换到上一个分支</span>
</span></span><span class=line><span class=cl>$ git checkout -
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 恢复暂存区的指定文件到工作区</span>
</span></span><span class=line><span class=cl>$ git checkout <span class=o>[</span>file<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 恢复某个commit的指定文件到暂存区和工作区</span>
</span></span><span class=line><span class=cl>$ git checkout <span class=o>[</span>commit<span class=o>]</span> <span class=o>[</span>file<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 恢复暂存区的所有文件到工作区</span>
</span></span><span class=line><span class=cl>$ git checkout .
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 建立追踪关系，在现有分支与指定的远程分支之间</span>
</span></span><span class=line><span class=cl>$ git branch --set-upstream <span class=o>[</span>branch<span class=o>]</span> <span class=o>[</span>remote-branch<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 合并指定分支到当前分支</span>
</span></span><span class=line><span class=cl>$ git merge <span class=o>[</span>branch<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 选择一个commit，合并进当前分支</span>
</span></span><span class=line><span class=cl>$ git cherry-pick <span class=o>[</span>commit<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除分支</span>
</span></span><span class=line><span class=cl>$ git branch -d <span class=o>[</span>branch-name<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除远程分支</span>
</span></span><span class=line><span class=cl>$ git push origin --delete <span class=o>[</span>branch-name<span class=o>]</span>
</span></span><span class=line><span class=cl>$ git branch -dr <span class=o>[</span>remote/branch<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><a href=#git-tag-标签><h3 id=git-tag-标签><span class=hanchor arialabel=Anchor># </span>git tag 标签</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 列出所有tag</span>
</span></span><span class=line><span class=cl>$ git tag
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建一个tag在当前commit</span>
</span></span><span class=line><span class=cl>$ git tag <span class=o>[</span>tag<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建一个tag在指定commit</span>
</span></span><span class=line><span class=cl>$ git tag <span class=o>[</span>tag<span class=o>]</span> <span class=o>[</span>commit<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除本地tag</span>
</span></span><span class=line><span class=cl>$ git tag -d <span class=o>[</span>tag<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除远程tag</span>
</span></span><span class=line><span class=cl>$ git push origin :refs/tags/<span class=o>[</span>tagName<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看tag信息</span>
</span></span><span class=line><span class=cl>$ git show <span class=o>[</span>tag<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 提交指定tag</span>
</span></span><span class=line><span class=cl>$ git push <span class=o>[</span>remote<span class=o>]</span> <span class=o>[</span>tag<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 提交所有tag</span>
</span></span><span class=line><span class=cl>$ git push <span class=o>[</span>remote<span class=o>]</span> --tags
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建一个分支，指向某个tag</span>
</span></span><span class=line><span class=cl>$ git checkout -b <span class=o>[</span>branch<span class=o>]</span> <span class=o>[</span>tag<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><a href=#git-logstatus-查看历史><h3 id=git-logstatus-查看历史><span class=hanchor arialabel=Anchor># </span>git log/status 查看历史</h3></a><p>穿梭前，用git log可以查看提交历史，以便确定要回退到哪个版本。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 每个提交在一行内显示</span>
</span></span><span class=line><span class=cl>git log --oneline
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 在所有提交日志中搜索包含「homepage」的提交</span>
</span></span><span class=line><span class=cl>git log --all --grep<span class=o>=</span><span class=s1>&#39;homepage&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 获取某人的提交日志</span>
</span></span><span class=line><span class=cl>git log --author<span class=o>=</span><span class=s2>&#34;Maxence&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示有变更的文件</span>
</span></span><span class=line><span class=cl>$ git status
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示当前分支的版本历史</span>
</span></span><span class=line><span class=cl>$ git log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示commit历史，以及每次commit发生变更的文件</span>
</span></span><span class=line><span class=cl>$ git log --stat
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 搜索提交历史，根据关键词</span>
</span></span><span class=line><span class=cl>$ git log -S <span class=o>[</span>keyword<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示某个commit之后的所有变动，每个commit占据一行</span>
</span></span><span class=line><span class=cl>$ git log <span class=o>[</span>tag<span class=o>]</span> HEAD --pretty<span class=o>=</span>format:%s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示某个commit之后的所有变动，其&#34;提交说明&#34;必须符合搜索条件</span>
</span></span><span class=line><span class=cl>$ git log <span class=o>[</span>tag<span class=o>]</span> HEAD --grep feature
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示某个文件的版本历史，包括文件改名</span>
</span></span><span class=line><span class=cl>$ git log --follow <span class=o>[</span>file<span class=o>]</span>
</span></span><span class=line><span class=cl>$ git whatchanged <span class=o>[</span>file<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示指定文件相关的每一次diff</span>
</span></span><span class=line><span class=cl>$ git log -p <span class=o>[</span>file<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示过去5次提交</span>
</span></span><span class=line><span class=cl>$ git log -5 --pretty --oneline
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示所有提交过的用户，按提交次数排序</span>
</span></span><span class=line><span class=cl>$ git shortlog -sn
</span></span></code></pre></td></tr></table></div></div><a href=#git-blamediffshow-变化><h3 id=git-blamediffshow-变化><span class=hanchor arialabel=Anchor># </span>git blame/diff/show 变化</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 显示指定文件是什么人在什么时间修改过</span>
</span></span><span class=line><span class=cl>$ git blame <span class=o>[</span>file<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示暂存区和工作区的差异</span>
</span></span><span class=line><span class=cl>$ git diff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示暂存区和上一个commit的差异</span>
</span></span><span class=line><span class=cl>$ git diff --cached <span class=o>[</span>file<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示工作区与当前分支最新commit之间的差异</span>
</span></span><span class=line><span class=cl>$ git diff HEAD
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示两次提交之间的差异</span>
</span></span><span class=line><span class=cl>$ git diff <span class=o>[</span>first-branch<span class=o>]</span>...<span class=o>[</span>second-branch<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示今天你写了多少行代码</span>
</span></span><span class=line><span class=cl>$ git diff --shortstat <span class=s2>&#34;@{0 day ago}&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示某次提交的元数据和内容变化</span>
</span></span><span class=line><span class=cl>$ git show <span class=o>[</span>commit<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示某次提交发生变化的文件</span>
</span></span><span class=line><span class=cl>$ git show --name-only <span class=o>[</span>commit<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示某次提交时，某个文件的内容</span>
</span></span><span class=line><span class=cl>$ git show <span class=o>[</span>commit<span class=o>]</span>:<span class=o>[</span>filename<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>###git reflog/reset 重返未来</p><p>要重返未来，用git reflog查看命令历史，以便确定要回到未来的哪个版本。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 获取所有操作历史</span>
</span></span><span class=line><span class=cl>git reflog
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重置到相应提交</span>
</span></span><span class=line><span class=cl>git reset HEAD@<span class=o>{</span>4<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1># ……或者……</span>
</span></span><span class=line><span class=cl>git reset --hard &lt;提交的哈希值&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变</span>
</span></span><span class=line><span class=cl>$ git reset <span class=o>[</span>file<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重置暂存区与工作区，与上一次commit保持一致</span>
</span></span><span class=line><span class=cl>$ git reset --hard
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变</span>
</span></span><span class=line><span class=cl>$ git reset <span class=o>[</span>commit<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致</span>
</span></span><span class=line><span class=cl>$ git reset --hard <span class=o>[</span>commit<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重置当前HEAD为指定commit，但保持暂存区和工作区不变</span>
</span></span><span class=line><span class=cl>$ git reset --keep <span class=o>[</span>commit<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建一个commit，用来撤销指定commit</span>
</span></span><span class=line><span class=cl><span class=c1># 后者的所有变化都将被前者抵消，并且应用到当前分支</span>
</span></span><span class=line><span class=cl>$ git revert <span class=o>[</span>commit<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 暂时将未提交的变化移除，稍后再移入</span>
</span></span><span class=line><span class=cl>$ git stash
</span></span><span class=line><span class=cl>$ git stash pop
</span></span></code></pre></td></tr></table></div></div><a href=#git-remotepullpush-远程><h3 id=git-remotepullpush-远程><span class=hanchor arialabel=Anchor># </span>git remote/pull/push 远程</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 下载远程仓库的所有变动</span>
</span></span><span class=line><span class=cl>$ git fetch <span class=o>[</span>remote<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示所有远程仓库</span>
</span></span><span class=line><span class=cl>$ git remote -v
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 显示某个远程仓库的信息</span>
</span></span><span class=line><span class=cl>$ git remote show <span class=o>[</span>remote<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 增加一个新的远程仓库，并命名</span>
</span></span><span class=line><span class=cl>$ git remote add <span class=o>[</span>shortname<span class=o>]</span> <span class=o>[</span>url<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 取回远程仓库的变化，并与本地分支合并</span>
</span></span><span class=line><span class=cl>git pull <span class=o>[</span>remote<span class=o>]</span> <span class=o>[</span>branch<span class=o>]</span>
</span></span><span class=line><span class=cl>git remote add origin git@server-name:path/repo-name.git
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 上传本地指定分支到远程仓库</span>
</span></span><span class=line><span class=cl>git push <span class=o>[</span>remote<span class=o>]</span> <span class=o>[</span>branch<span class=o>]</span>
</span></span><span class=line><span class=cl>git push -u origin master
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 强行推送当前分支到远程仓库，即使有冲突</span>
</span></span><span class=line><span class=cl>$ git push <span class=o>[</span>remote<span class=o>]</span> --force
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 推送所有分支到远程仓库</span>
</span></span><span class=line><span class=cl>$ git push <span class=o>[</span>remote<span class=o>]</span> --all
</span></span></code></pre></td></tr></table></div></div><a href=#gitignore><h3 id=gitignore><span class=hanchor arialabel=Anchor># </span>.gitignore</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 此为注释 – 将被 Git 忽略</span>
</span></span><span class=line><span class=cl>*.a       <span class=sb>``</span><span class=c1># 忽略所有 .a 结尾的文件</span>
</span></span><span class=line><span class=cl>!lib.a    <span class=sb>``</span><span class=c1># 但 lib.a 除外</span>
</span></span><span class=line><span class=cl>/TODO<span class=sb>`</span>     <span class=sb>`</span><span class=c1># 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO</span>
</span></span><span class=line><span class=cl>build/    <span class=sb>``</span><span class=c1># 忽略 build/ 目录下的所有文件</span>
</span></span><span class=line><span class=cl>doc/*.txt <span class=sb>``</span><span class=c1># 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span>
</span></span></code></pre></td></tr></table></div></div><p>• 所有空行或者以 # 开头的行都会被 Git 忽略。 • 可以使用标准的 glob 模式匹配。
• 匹配模式可以以(/)开头防止递归。
• 匹配模式可以以(/)结尾指定目录。</p><p>• 要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号(!)取反。</p><p>所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。 星号(*)匹配零个或多个任意字符;[abc] 匹配 任何一个列在方括号中的字符(这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c);问号(?)只匹配一个任意字符;如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配 (比如 [0-9] 表示匹配所有 0 到 9 的数字)。 使用两个星号(*) 表示匹配任意中间目录，比如 a/**/z 可以匹 配 a/z , a/b/z 或 a/b/c/z 等。</p><p>!!!使更改后的gitignore生效：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git rm -r --cached .  <span class=c1>#清除缓存</span>
</span></span><span class=line><span class=cl>git add . <span class=c1>#重新trace file</span>
</span></span></code></pre></td></tr></table></div></div><a href=#底层数据结构和原理><h3 id=底层数据结构和原理><span class=hanchor arialabel=Anchor># </span>底层数据结构和原理</h3></a><p><img src="https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9XmZUicqmfmQQXfknLKRNWh9vPibmsyvot1l9lwJpicib8zAQjAmD7Mv9Cg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>上图描述了 git 对象的在不同的生命周期中不同的存储位置，通过不同的 git 命令改变 git <strong>对象的存储生命周期。</strong></p><p>工作区 (workspace)</p><p>就是我们当前工作空间，也就是我们当前能在本地文件夹下面看到的文件结构。初始化工作空间或者工作空间 clean 的时候，文件内容和 index 暂存区是一致的，随着修改，工作区文件在没有 add 到暂存区时候，工作区将和暂存区是不一致的。</p><p>暂存区 (index)</p><p>老版本概念也叫 Cache 区，就是文件暂时存放的地方，所有暂时存放在暂存区中的文件将随着一个 commit 一起提交到 local repository 此时 local repository 里面文件将完全被暂存区所取代。暂存区是 git 架构设计中非常重要和难理解的一部分。</p><p>本地仓库 (local repository)</p><p>git 是分布式版本控制系统，和其他版本控制系统不同的是他可以完全去中心化工作，你可以不用和中央服务器 (remote server) 进行通信，在本地即可进行全部离线操作，包括 log，history，commit，diff 等等。完成离线操作最核心是因为 git 有一个几乎和远程一样的本地仓库，所有本地离线操作都可以在本地完成，等需要的时候再和远程服务进行交互。</p><p>远程仓库 (remote repository)</p><p>中心化仓库，所有人共享，本地仓库会需要和远程仓库进行交互，也就能将其他所有人内容更新到本地仓库把自己内容上传分享给其他人。结构大体和本地仓库一样。</p><p>文件在不同的操作下可能处于不同的 git 生命周期，下面看看一个文件变化的例子。</p><a href=#文件变化><h4 id=文件变化><span class=hanchor arialabel=Anchor># </span>文件变化</h4></a><p><img src="https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9H1qJcFZE6mtIxEQKmzsht2LQz74e0zEnMwaXricZ0msrFZY1Nb4JUIw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><a href=#对象模型><h4 id=对象模型><span class=hanchor arialabel=Anchor># </span><strong>对象模型</strong></h4></a><p>仓库结构</p><p>git 分布式的一个重要体现是 git 在本地是有一个完整的 git 仓库也就是 .git 文件目录，通过这个仓库，git 就可以完全离线化操作。在这个本地化的仓库中存储了 git 所有的模型对象。下面是 git 仓库的 tree 和相关说明：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9g4rDlrqSsbI00RJDC1sbpdshFjyeDwbVfHYZwlEn6JSXfO5JWydDYg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><a href=#git-主要有四个对象分别是-blobtree-commit-tag-他们都用-sha-1-进行命名><h4 id=git-主要有四个对象分别是-blobtree-commit-tag-他们都用-sha-1-进行命名><span class=hanchor arialabel=Anchor># </span>git 主要有四个对象，分别是 Blob，Tree， Commit， Tag 他们都用 SHA-1 进行命名。</h4></a><p>你可以用 git cat-file -t 查看每个 SHA-1 的类型，用 git cat-file -p 查看每个对象的内容和简单的数据结构。git cat-file 是 git 的瑞士军刀，是底层核心命令。</p><p>Blob 对象</p><p>只用于存储单个文件内容，一般都是二进制的数据文件，不包含任何其他文件信息，比如不包含文件名和其他元数据。</p><p>Tree 对象</p><p>对应文件系统的目录结构，里面主要有：子目录 (tree)，文件列表 (blob)，文件类型以及一些数据文件权限模型等。</p><p>如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>→ git cat-file -t ed807a4d010a06ca83d448bc74c6cc79121c07c3
</span></span><span class=line><span class=cl>tree
</span></span><span class=line><span class=cl>→ git cat-file -p ed807a4d010a06ca83d448bc74c6cc79121c07c3
</span></span><span class=line><span class=cl><span class=m>100644</span> blob 36a982c504eb92330573aa901c7482f7e7c9d2e6    .cise.yml
</span></span><span class=line><span class=cl><span class=m>100644</span> blob c439a8da9e9cca4e7b29ee260aea008964a00e9a    .eslintignore
</span></span><span class=line><span class=cl><span class=m>100644</span> blob 245b35b9162bec4ef798eb05b533e6c98633af5c    .eslintrc
</span></span><span class=line><span class=cl><span class=m>100644</span> blob 10123778ec5206edcd6e8500cc78b77e79285f6d    .gitignore
</span></span><span class=line><span class=cl><span class=m>100644</span> blob 1a48aa945106d7591b6342585b1c29998e486bf6    README.md
</span></span><span class=line><span class=cl><span class=m>100644</span> blob 514f7cb2645f44dd9b66a87f869d42902174fe40    abc.json
</span></span><span class=line><span class=cl><span class=m>040000</span> tree 8955f46834e3e35d74766639d740af922dcaccd3    cli_list100644 blob f7758d0600f6b9951cf67f75cf0e2fabcea55771    dep.json
</span></span><span class=line><span class=cl><span class=m>040000</span> tree e2b3ee59f6b030a45c0bf2770e6b0c1fa5f1d8c7    doc
</span></span><span class=line><span class=cl><span class=m>100644</span> blob e3c712d7073957c3376d182aeff5b96f28a37098    index.js
</span></span><span class=line><span class=cl><span class=m>040000</span> tree b4aadab8fc0228a14060321e3f89af50ba5817ca    lib040000 tree 249eafef27d9d8ebe966e35f96b3092d77485a79    mock
</span></span><span class=line><span class=cl><span class=m>100644</span> blob 95913ff73be1cc7dec869485e80072b6abdd7be4    package.json
</span></span><span class=line><span class=cl><span class=m>040000</span> tree e21682d1ebd4fdd21663ba062c5bfae0308acb64    src
</span></span><span class=line><span class=cl><span class=m>040000</span> tree 91612a9fa0cea4680228bfb582ed02591ce03ef2    static
</span></span><span class=line><span class=cl><span class=m>040000</span> tree d0265f130d2c5cb023fe16c990ecd56d1a07b78c    task100644 blob ab04ef3bda0e311fc33c0cbc8977dcff898f4594    webpack.config.js
</span></span><span class=line><span class=cl><span class=m>100644</span> blob fb8e6d3a39baf6e339e235de1a9ed7c3f1521d55    webpack.dll.config.js
</span></span><span class=line><span class=cl><span class=m>040000</span> tree 5dd44553be0d7e528b8667ac3c027ddc0909ef36    webpack
</span></span></code></pre></td></tr></table></div></div><p>详细解释如下：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9nxScpZUUdzmTWO3zMLKEibibVS3r5dKibjCdB5M2ibIjkfmWhBUicb0ukfg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>Commit 对象</p><p>是一次修改的集合，当前所有修改的文件的一个集合，可以类比一批操作的“事务”。是修改过的文件集的一个快照，随着一次 commit 操作，修改过的文件将会被提交到 local repository 中。通过 commit 对象，在版本化中可以检索出每次修改内容，是版本化的基石。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>→ git cat-file -t fbf9e415f77008b780b40805a9bb996b37a6ad2c
</span></span><span class=line><span class=cl>commit
</span></span><span class=line><span class=cl>→ git cat-file -p fbf9e415f77008b780b40805a9bb996b37a6ad2c
</span></span><span class=line><span class=cl>tree bd31831c26409eac7a79609592919e9dcd1a76f2
</span></span><span class=line><span class=cl>parent d62cf8ef977082319d8d8a0cf5150dfa1573c2b7
</span></span><span class=line><span class=cl>author xxx  <span class=m>1502331401</span> +0800
</span></span><span class=line><span class=cl>committer xxx  <span class=m>1502331401</span> +0800
</span></span><span class=line><span class=cl>修复增量bug
</span></span></code></pre></td></tr></table></div></div><p>详细解释如下：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9yHhiaNkyGJshQDVfLxgERUkXQEV8Uib67dOIqf1bG2ZpjhdbvrYpuFQw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>Tag 对象</p><p>tag 是一个"固化的分支"，一旦打上 tag 之后，这个 tag 代表的内容将永远不可变，因为 tag 只会关联当时版本库中最后一个 commit 对象。</p><p>分支的话，随着不断的提交，内容会不断的改变，因为分支指向的最后一个 commit 不断改变。所以一般应用或者软件版本的发布一般用 tag。</p><p>git 的 Tag 类型有两种：</p><p><strong>1 lightweight (轻量级)</strong></p><p>创建方式：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git tag tagName
</span></span></code></pre></td></tr></table></div></div><p>这种方创建的 Tag，git 底层不会创建一个真正意义上的 tag 对象，而是直接指向一个 commit 对象，此时如果使用 git cat-file -t tagName 会返回一个 commit。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>→ git cat-file -t v4
</span></span><span class=line><span class=cl>commit
</span></span><span class=line><span class=cl>→ git cat-file -p v4
</span></span><span class=line><span class=cl>tree ceab4f96440655b0ff1a783316c95450fa1fb436
</span></span><span class=line><span class=cl>parent 7f23c9ca70ce64fc58e8c7507c990c6c6a201d3d
</span></span><span class=line><span class=cl>author 与水  1506224164 +0800
</span></span><span class=line><span class=cl>committer 与水  1506224164 +0800
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>rawtest2
</span></span></code></pre></td></tr></table></div></div><p><strong>2 annotated (含附注)</strong></p><p>创建方式：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git tag -a tagName -m&#39;&#39;
</span></span></code></pre></td></tr></table></div></div><p>这种方式创建的标签，git 底层会创建一个 tag 对象，tag 对象会包含相关的 commit 信息和 tagger 等额外信息，此时如果使用 git cat-file -t tagname 会返回一个 tag。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>
</span></span><span class=line><span class=cl>→ git cat-file -t v3
</span></span><span class=line><span class=cl>tag
</span></span><span class=line><span class=cl>→ git cat-file -p v3
</span></span><span class=line><span class=cl>object d5d55a49c337d36e16dd4b05bfca3816d8bf6de8   //commit 对象SHA-1
</span></span><span class=line><span class=cl>type commit
</span></span><span class=line><span class=cl>tag v3
</span></span><span class=line><span class=cl>tagger xxx  1506230900 +0800
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>与水测试标注型tag
</span></span></code></pre></td></tr></table></div></div><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9g1SCYDEib7Fo4sK4Frfr6jPibbaS9P3ARvRDnqibuickjXWQ1EwnBlV4hQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>总结：所有对象模型之间的关系大致如下：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9oicUzRnDBLbTxL0yH5U6X9NETY6WTV7IeJEHH3aOZnZ4iaDXysyYPjmQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><a href=#存储模型><h4 id=存储模型><span class=hanchor arialabel=Anchor># </span><strong>存储模型</strong></h4></a><p>概念</p><p>git 区别与其他 vcs 系统的一个最主要原因之一是：git 对文件版本管理和其他 vcs 系统对文件版本的实现理念完成不一样。这也就是 git 版本管理为什么如此强大的最核心的地方。</p><p>Svn 等其他的 VCS 对文件版本的理念是以文件为水平维度，记录每个文件在每个版本下的 delta 改变。</p><p>Git 对文件版本的管理理念却是以每次提交为一次快照，提交时对所有文件做一次全量快照，然后存储快照引用。</p><p>Git 在存储层，如果文件数据没有改变的文件，Git 只是存储指向源文件的一个引用，并不会直接多次存储文件，这一点可以在 pack 文件中看见。</p><p>如下图所示：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9m9icO51OGWfBz3B6KYY7QA94JdBF7RjWOaJ8b1XtDVg9jp9Ga3EroWw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>存储</p><p>随着需求和功能的不断复杂，git 版本的不断更新，但是主要的存储模型还是大致不变。如下图所示：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9XXtzQlDdITL8CcPWvJY0iaHS6XWOFnW9LEoricldTnw8ozEicv95kkvEg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p><strong>检索模型</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>→ cd .git/objects/
</span></span><span class=line><span class=cl>→ ls
</span></span><span class=line><span class=cl>03   28   7f   ce   d0   d5   e6   f9   info pack
</span></span></code></pre></td></tr></table></div></div><p>git 的对象有两种：</p><p>一种是松散对象，就是在如上 .git/objects 的文件夹 03 28 7f ce d0 d5 e6 f9 等，这些文件夹只有 2 个字符开头，其实就是每个文件 SHA-1 值的前 2 个字母，最多有 #OXFF 256 个文件夹。</p><p>一种是打包压缩对象，打包压缩之后的对象主要存在的是 pack 文件中，主要用于文件在网络上传输，减少网络消耗。</p><p>为了节省存储空间，可以手动触发打包压缩操作 (git gc)，将松散对象打包成 pack 文件对象。也可以将 pack 文件解压缩成松散对象 (git unpack-objects)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>→ cd pack
</span></span><span class=line><span class=cl>→ ls
</span></span><span class=line><span class=cl>pack-efbf3149604d24e6ea427b025da0c59245b2c2ea.idx  pack-efbf3149604d24e6ea427b025da0c59245b2c2ea.pack
</span></span></code></pre></td></tr></table></div></div><p>为了加快 pack 文件的检索效率，git 基于 pack 文件会生成相应的索引 idx 文件。</p><p>pack 文件</p><p>pack 文件设计非常精密和巧妙，本着降低文件大小，减少文件传输，降低网络开销和安全传输的原则设计的。</p><p>pack 文件设计的概图如下：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9ojyJ617kWBtRDB0mYMjTxLTS0QbLTqqqns3ULaWzwLnElJNrhZJbWA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>pack 文件主要有三部分组成，Header， Body， Trailer</p><ul><li><p>Header 部分主要 4-byte &ldquo;PACK&rdquo;, 4-byte &ldquo;版本号&rdquo;, 4-byte &ldquo;Object 条目数&rdquo;。</p></li><li><p>Body 部分主要是一个个 Git 对象依次存储，存储位置在 idx 索引文件中记录改对象在 pack 文件中的偏移量 offset。</p></li><li><p>Trailer 部分主要是所有 Objects 的名 (SHA-1）的校验和，为了安全可靠的文件传输。</p></li></ul><p>下面我们看具体的 pack 文件：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9iawwujQXpjWWrf9HicXpKZXQSjwq7dk5MJ7y7z4hVO3QPWlr3QNREP0w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>从上图可知：通过 idx 索引文件在 pack 文件中定位到对象之后，对象的结构主要 Header 和 Data 两部分。</p><p><strong>1 Header 部分</strong></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9bPYKvhdQa4xmPfT0BuePD1XT9JoPfbvygbX7eQ2vkNcTtucwBuHlsw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>Header 中首 8-bits：1-bit 是 MSB，接着的 3-bits 表示的是当前对象类型，主要有 6种存储类型，接着的 4-bits 是用于表示该 Object 展开的 (length) 大小的一部分，只是一部分，完整的大小取决于MSB和接下来的多个 bits，完整算法如下：</p><ul><li><p>如果 8-bits 中第一位是 1，表示下一个字节还是 header 的一部分，用于表示该对象展开的大小。</p></li><li><p>如果 8-bits 中第一位是 0，表示从下一个字节开始，将是数据 Data 文件。</p></li><li><p>如果对象类型是 OBJ_OFS_DELTA 类型, 表示的是 Delta 存储，当前 git 对象只是存储了增量部分，对于基本的部分将由接下来的可变长度的字节数用于表示 base object 的距离当前对象的偏移量，接下来的可变字节也是用 1-bit MSB 表示下一个字节是否是可变长度的组成部分。对偏移量取负数，就可知 base 对象在当前对象的前面多少字节。</p></li><li><p>如果对象类型是 OBJ_REF_DELTA 类型，表示的是 Delta 存储，当前 git 对象只是存储了增量部分，对于基本的部分，用 20-bytes 存储 Base Object 的 SHA-1 。</p></li></ul><p><strong>2 Data 部分</strong></p><p>是经过 Zlib 压缩过的数据。可能是全部数据，也有可能是 Delta 数据，具体看 Header 部分的存储类型，如果是 OBJ_OFS_DELTA 或者 OBJ_REF_DELTA 此处存储的就是增量 (Delta) 数据，此时如果要取得全量数据的话，需要递归的找到最 Base Object，然后 apply delta 数据，在 base object 基础上进行 apply delta 数据也是非常精妙的，此文暂不做介绍。</p><p>从上面可以很清晰知道 pack 文件格式，我们再从本地仓库中一探究竟：</p><p>不是增量 delta 式：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>SHA-1 type size size-in-packfile offset-in-packfile
</span></span></code></pre></td></tr></table></div></div><p>增量 delta 格式：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>SHA-1 type size size-in-packfile offset-in-packfile depth base-SHA-1
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>→ git verify-pack -v pack-efbf3149604d24e6ea427b025da0c59245b2c2ea.pack
</span></span><span class=line><span class=cl>cb5a93c4cf9c0ee5b7153a3a35a4fac7a7584804 commit 275 189 12
</span></span><span class=line><span class=cl>399334856af4ca4b49c0008a25b6a9f524e40350 commit 69 81 201 1 cb5a93c4cf9c0ee5b7153a3a35a4fac7a7584804
</span></span><span class=line><span class=cl>e0efbd5121c31964af1615cf24135a7c6c11cc1d commit 268 187 282
</span></span><span class=line><span class=cl>7bc9a5e0199bd4a6d4d223ce7e13239631df9635 commit 29 41 469 1 e0efbd5121c31964af1615cf24135a7c6c11cc1d
</span></span><span class=line><span class=cl>2e43c62f6ff99c88d20329487137f8dbabc8b3ec commit 220 157 510
</span></span><span class=line><span class=cl>b6f173085f49f109a00b2a3f08a7dc499cc47f1f commit 220 157 667
</span></span><span class=line><span class=cl>0466b3f1aadde74234f7dd3f4ef7f1505c50fb0c commit 220 157 824
</span></span><span class=line><span class=cl>76c5e45f8e295226b1bc5c8c7e2bc98d7eae6be1 commit 74 85 981 1 b6f173085f49f109a00b2a3f08a7dc499cc47f1f
</span></span><span class=line><span class=cl>2729f1fa896d384b49a2f5c53d483eacc0929ebb commit 172 127 1066
</span></span><span class=line><span class=cl>3cc58df83752123644fef39faab2393af643b1d2 blob   2 11 1193
</span></span><span class=line><span class=cl>62189d1a10cc2a544c4e5b9c4aba9493cf5782dc blob   8 15 1204
</span></span><span class=line><span class=cl>a9a5aecf429fd8a0d81fbd5fd37006bfa498d5c1 blob   4 13 1219
</span></span><span class=line><span class=cl>2b8982f7c281964658d2cd8b6c17b541533dd277 tree   104 105 1232
</span></span><span class=line><span class=cl>92c4aafa39ee387a1f8237f00c78c499aebaf0b2 tree   104 105 1337
</span></span><span class=line><span class=cl>223b7836fb19fdf64ba2d3cd6173c6a283141f78 blob   2 11 1442
</span></span><span class=line><span class=cl>1756ca64f21724f350fe2cc5cfb218883e314c3d tree   71 80 1453
</span></span><span class=line><span class=cl>e11ddfa79f01b01a8e1553bbffaa2d6c03ae9f6e tree   71 80 1533
</span></span><span class=line><span class=cl>f70f10e4db19068f79bc43844b49f3eece45c4e8 blob   2 11 1613
</span></span><span class=line><span class=cl>e982b6207b10a869164e2c8d19d25ffb059e6a16 tree   66 73 1624
</span></span><span class=line><span class=cl>f2e9f73f27124916344e0fd03bb449bc6feca59d tree   66 74 1697
</span></span><span class=line><span class=cl>d09da444f461d7cee3679666a1ded5ab79832ed0 tree   33 44 1771
</span></span><span class=line><span class=cl>non delta: 18 objects
</span></span><span class=line><span class=cl>chain length = 1: 3 objects
</span></span><span class=line><span class=cl>pack-efbf3149604d24e6ea427b025da0c59245b2c2ea.pack: ok
</span></span></code></pre></td></tr></table></div></div><p>如 399334856af4ca4b49c0008a25b6a9f524e40350(SHA-1) 表示对象的 base object SHA-1 是 cb5a93c4cf9c0ee5b7153a3a35a4fac7a7584804，base 对象最大深度 (depth) 为 1，如果 cb5a93c4cf9c0ee5b7153a3a35a4fac7a7584804 还有引用对象，则改变 depth 为 2。</p><p>pack Header 中最后 4-bytes 用于表示的 pack 文件中 objects 的数量，最多 2 的 32 次方个对象，所以一些大的工程中有多个 pack 文件和多个 idx 文件。</p><p>文件的 size (文件解压缩后大小) 有什么用呢，这个是为了方便我们进行解压的时候，设置流的大小，也就是方便知道流有多大。这里 size 不是说明下一个文件的偏移量，偏移量都是来自索引文件，见下面 idx：</p><p>index 文件</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb99nf6xw3UVlcFvlMdF2e1VZrxFOiciawG9WR6oua3BviaMZkOBvVevr0qA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>由于 version1 比较简单下面用 version2 为例子：</p><p>分层模式：Header，Fanout,SHA，CRC，Offset，Big File Offset，Trailer。</p><p>**Header **</p><p>version2 的 Header 部分总共有 8-bytes，version 1 的 header 部分是没有的，前 4-bytes 总是 255, 116, 79, 99 因为这个也是版本 1 的开头四个字节，后面 4-bytes 用于表示的是版本号，在当前就是 version 2。</p><p><strong>Fanout 层</strong></p><p>fanout 层是 git 的亮点设计，也叫 Fanout Table（扇表）。fanout 数组中存储的是相关对象的数目，数组下标是对应 16 进制数。fanout 最后一个存储的是整个 pack 文件中所有对象的总数量。Fanout Table 是整个 git 检索的核心，通过它我们可以快速进行查询，用于定位 SHA 层的数组起始 - 终止下标，定位好 SHA 层范围之后，就可以对 SHA 层进行二分查找了，而不用对所有对象进行二分查找。</p><p>fanout 总共 256 个，刚好是十六进制的 #0xFF。fanout 数组用 SHA 的前面 2 个字符作为下标(对应 .git/objects 中的松散文件目录名，将 16 进制的目录名转换 10 进制数字)，里面值就是用这两个字符开头的文件数量，而且是逐层累加的，后面的数组数量是包含前面数组的数据的个数的一个累加。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb94I6Ao3GiaQqdpoGdjPSrra6CopjZ6kfCiap0X4olUMlgSQ8tp7GQlXicQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>举例如下：</p><p>1）如果数组下标为 0，且 Fanout[0] = 10 代表着 #0x00 开头的 SHA-1 值的总数为 10 个。</p><p>2） 如果数组下标为 1，且 Fanout[1] = 15 代表着小于 #0x01 开头的 SHA-1 值的总数为 15 个，从 Fanout[0] = 10 知 Fanout[1] = （15-10）</p><p>为什么 git 设计上 Fanout[n] 会累加 Fanout[n-1] 的数量？这个主要是为了快速确定 SHA 层检索的初始位置，而不用每次去把前面所有 fanout[..n-1] 数量进行累加。</p><p><strong>SHA 层</strong></p><p>是所有对象的 SHA-1 的排序，按照名称排序，按照名称进行排序是为了用二分搜索进行查找。每个 SHA-1 值占 20-bytes。</p><p><strong>CRC 层</strong></p><p>由于文件打包主要解决网络传输问题，网络传输的时候必须通过 crc 进行校验，避免传输过程中的文件损坏。CRC 数组对应的是每个对象的 CRC 校验和。</p><p><strong>Offset 层</strong></p><p>是由 4 byte 字节所组成，表示的是每个 SHA-1 文件的偏移量，但是如果文件大于 2G 之后，4 byte 字节将无法表示，此时将：</p><p>4 byte 中的第一 bit 就是 MSB，如果是 1 表示的是文件的偏移量是放在第 6 层去存储，此时剩下的 31-bits 将表示文件在 Big File Offset 中的偏移量，也就是图中的，通过 Big File Offset 层 就可以知道对象在 pack 中的 offset。</p><p>4 byte 中的第一 bit 就是 MSB，如果是 0 31-bits 表示的存储对象在 packfile 中的文件偏移量，此时不涉及 Big File Offset 层</p><p><strong>Big File Offset 层</strong></p><p>用于存储大于 2G 的文件的偏移量。如果文件大于 2G，可以通过 offset 层最后 31 bits 决定在 big file offset 中的位置，big file offset 通过 8 bytes 来表示对象在 pack 文件中的位置，理论上可以表示 2 的 64 次方文件大小。</p><p><strong>Trailer 层</strong></p><p>包含的是 packfile checksum 和关联的 idx 的 checksum。</p><p><strong>索引流程</strong></p><p>从上面的分层知道 git 设计的巧妙。git 索引文件偏移量的查询流程如下：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9W190VJCiapx51Yqo5r55PzgPhBwX8n88zUp19e70pW3Rpia7fkEp1lPQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>查询算法</p><p>通过 idx 文件查询 SHA-1 对应的偏移量：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb91cQuaeDQ2DS2Xdvu3TeHvHl1BWlvm46icOF6gPXSe2icm0rzEqXdJkNA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>在 pack 文件中通过偏移量找到对象：</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/Z6bicxIx5naLaUlprPbJo4hLyFYOEfXb9iawwujQXpjWWrf9HicXpKZXQSjwq7dk5MJ7y7z4hVO3QPWlr3QNREP0w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" width=auto alt=img></p><p>如果是普通的存储类型。定位到的对象就是用 Zlib 压缩之后的对象，直接解压缩即可。</p><p>如果是 Delta 类型需要 递归查出 Delta 的 Base 对象，然后再把 delta data 应用到 base object 上(可参考 git-apply-delta)。</p><a href=#提交规范><h3 id=提交规范><span class=hanchor arialabel=Anchor># </span>提交规范</h3></a><p>一般个人开发时可随意遵守，但对于团队感觉还是适用的。</p><p><a href=https://juejin.im/post/5d0b3f8c6fb9a07ec07fc5d0 rel=noopener>使用插件可访问</a></p><p>基本commit样式</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&lt;type&gt;<span class=o>(</span>&lt;scope&gt;<span class=o>)</span>: &lt;subject&gt;
</span></span><span class=line><span class=cl>&lt;BLANK LINE&gt;
</span></span><span class=line><span class=cl>&lt;body&gt;
</span></span><span class=line><span class=cl>&lt;BLANK LINE&gt;
</span></span><span class=line><span class=cl>&lt;footer&gt;
</span></span></code></pre></td></tr></table></div></div><a href=#1type><h4 id=1type><span class=hanchor arialabel=Anchor># </span>1.type</h4></a><p><code>type</code>为必填项，用于指定commit的类型，约定了<code>feat</code>、<code>fix</code>两个<code>主要type</code>，以及docs、style、build、refactor、revert五个<code>特殊type</code>，<code>其余type</code>暂不使用。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># 主要type
</span></span><span class=line><span class=cl>feat:     增加新功能
</span></span><span class=line><span class=cl>fix:      修复bug
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 特殊type
</span></span><span class=line><span class=cl>docs:     只改动了文档相关的内容
</span></span><span class=line><span class=cl>style:    不影响代码含义的改动，例如去掉空格、改变缩进、增删分号
</span></span><span class=line><span class=cl>build:    构造工具的或者外部依赖的改动，例如webpack，npm
</span></span><span class=line><span class=cl>refactor: 代码重构时使用
</span></span><span class=line><span class=cl>revert:   执行git revert打印的message
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 暂不使用type
</span></span><span class=line><span class=cl>test:     添加测试或者修改现有测试
</span></span><span class=line><span class=cl>perf:     提高性能的改动
</span></span><span class=line><span class=cl>ci:       与CI（持续集成服务）有关的改动
</span></span><span class=line><span class=cl>chore:    不修改src或者test的其余修改，例如构建过程或辅助工具的变动
</span></span><span class=line><span class=cl>复制代码
</span></span></code></pre></td></tr></table></div></div><p>当一次改动包括<code>主要type</code>与<code>特殊type</code>时，统一采用<code>主要type</code>。</p><a href=#2scope><h4 id=2scope><span class=hanchor arialabel=Anchor># </span>2.scope</h4></a><p><code>scope</code>也为必填项，用于描述改动的范围，格式为项目名/模块名，例如： <code>node-pc/common</code> <code>rrd-h5/activity</code>，而<code>we-sdk</code>不需指定模块名。如果一次commit修改多个模块，建议拆分成多次commit，以便更好追踪和维护。</p><a href=#3body><h4 id=3body><span class=hanchor arialabel=Anchor># </span>3.body</h4></a><p><code>body</code>填写详细描述，主要描述<code>改动之前的情况</code>及<code>修改动机</code>，对于小的修改不作要求，但是重大需求、更新等必须添加body来作说明。</p><a href=#4break-changes><h4 id=4break-changes><span class=hanchor arialabel=Anchor># </span>4.break changes</h4></a><p><code>break changes</code>指明是否产生了破坏性修改，涉及break changes的改动必须指明该项，类似版本升级、接口参数减少、接口删除、迁移等。</p><a href=#5affect-issues><h4 id=5affect-issues><span class=hanchor arialabel=Anchor># </span>5.affect issues</h4></a><p><code>affect issues</code>指明是否影响了某个问题。例如我们使用jira时，我们在<code>commit message</code>中可以填写其影响的<code>JIRA_ID</code>，若要开启该功能需要先打通<code>jira</code>与<code>gitlab</code>。参考文档：
<a href=https://docs.gitlab.com/ee/user/project/integrations/jira.html rel=noopener>docs.gitlab.com/ee/user/pro…</a></p><p>填写方式例如：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>re #JIRA_ID
</span></span><span class=line><span class=cl>fix #JIRA_ID
</span></span></code></pre></td></tr></table></div></div><a href=#示例><h4 id=示例><span class=hanchor arialabel=Anchor># </span>示例</h4></a><ul><li><p>完整的commit message示例</p><p><img src=https://cdn.jsdelivr.net/gh/radoapx/rad-figure-bed/PicGo/blogs/linux-softs/20200514215156.png width=auto alt></p></li><li><p>相应的git log</p><p><img src=https://cdn.jsdelivr.net/gh/radoapx/rad-figure-bed/PicGo/blogs/linux-softs/20200514215207.png width=auto alt></p></li></ul><a href=#rpm><h2 id=rpm><span class=hanchor arialabel=Anchor># </span>RPM</h2></a><a href=#rpm概述><h4 id=rpm概述><span class=hanchor arialabel=Anchor># </span>RPM概述</h4></a><p>RPM（RedHat Package Manager），RedHat软件包管理工具，类似windows里面的setup.exe是Linux这系列操作系统里面的打包安装工具，它虽然是RedHat的标志，但理念是通用的。</p><p>RPM包的名称格式:</p><p>Apache-1.3.23-11.i386.rpm</p><ul><li><p>“apache” 软件名称</p></li><li><p>“1.3.23-11”软件的版本号，主版本和此版本</p></li><li><p>“i386”是软件所运行的硬件平台，Intel 32位微处理器的统称</p></li><li><p>“rpm”文件扩展名，代表RPM包</p></li></ul><a href=#rpm查询命令rpm--qa><h4 id=rpm查询命令rpm--qa><span class=hanchor arialabel=Anchor># </span>RPM查询命令（rpm -qa）</h4></a><a href=#基本语法><h5 id=基本语法><span class=hanchor arialabel=Anchor># </span>基本语法</h5></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ rpm -qa				（功能描述：查询所安装的所有rpm软件包）
</span></span></code></pre></td></tr></table></div></div><a href=#经验技巧><h5 id=经验技巧><span class=hanchor arialabel=Anchor># </span>经验技巧</h5></a><p>由于软件包比较多，一般都会采取过滤。<strong>rpm -qa | grep rpm</strong>软件包</p><a href=#案例><h5 id=案例><span class=hanchor arialabel=Anchor># </span>案例</h5></a><p>（1）查询firefox软件安装情况</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@hadoop101 Packages<span class=o>]</span><span class=c1># rpm -qa |grep firefox </span>
</span></span><span class=line><span class=cl>-------------
</span></span><span class=line><span class=cl>firefox-45.0.1-1.el6.centos.x86_64
</span></span></code></pre></td></tr></table></div></div><a href=#rpm卸载命令rpm--e><h4 id=rpm卸载命令rpm--e><span class=hanchor arialabel=Anchor># </span>RPM卸载命令（rpm -e）</h4></a><a href=#基本语法-1><h5 id=基本语法-1><span class=hanchor arialabel=Anchor># </span>基本语法</h5></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl> $ rpm -e RPM软件包   
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ rpm -e --nodeps 软件包 
</span></span></code></pre></td></tr></table></div></div><a href=#选项说明><h5 id=选项说明><span class=hanchor arialabel=Anchor># </span>选项说明</h5></a><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-e</td><td>卸载软件包</td></tr><tr><td>&ndash;nodeps</td><td>卸载软件时，不检查依赖。这样的话，那些使用该软件包的软件在此之后可能就不能正常工作了。</td></tr></tbody></table><a href=#案例-1><h5 id=案例-1><span class=hanchor arialabel=Anchor># </span>案例</h5></a><p>（1）卸载firefox软件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@hadoop101 Packages<span class=o>]</span><span class=c1># rpm -e firefox</span>
</span></span></code></pre></td></tr></table></div></div><a href=#rpm安装命令rpm--ivh><h4 id=rpm安装命令rpm--ivh><span class=hanchor arialabel=Anchor># </span>RPM安装命令（rpm -ivh）</h4></a><a href=#基本语法-2><h5 id=基本语法-2><span class=hanchor arialabel=Anchor># </span>基本语法</h5></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ rpm -ivh RPM包全名
</span></span></code></pre></td></tr></table></div></div><a href=#选项说明-1><h5 id=选项说明-1><span class=hanchor arialabel=Anchor># </span>选项说明</h5></a><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-i</td><td>-i=install，安装</td></tr><tr><td>-v</td><td>-v=verbose，显示详细信息</td></tr><tr><td>-h</td><td>-h=hash，进度条</td></tr><tr><td>&ndash;nodeps</td><td>&ndash;nodeps，不检测依赖进度</td></tr></tbody></table><a href=#案例-2><h5 id=案例-2><span class=hanchor arialabel=Anchor># </span>案例</h5></a><p>（1）安装firefox软件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@hadoop101 Packages<span class=o>]</span><span class=c1># pwd</span>
</span></span><span class=line><span class=cl>-------------------------------
</span></span><span class=line><span class=cl>/media/CentOS_6.8_Final/Packages
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>root@hadoop101 Packages<span class=o>]</span><span class=c1># rpm -ivh firefox-45.0.1-1.el6.centos.x86_64.rpm </span>
</span></span><span class=line><span class=cl>---------------------------------------
</span></span><span class=line><span class=cl>warning: firefox-45.0.1-1.el6.centos.x86_64.rpm: Header V3 RSA/SHA1 Signature, key ID c105b9de: NOKEY
</span></span><span class=line><span class=cl>Preparing...                <span class=c1>########################################### [100%]</span>
</span></span><span class=line><span class=cl>   1:firefox                <span class=c1>########################################### [100%]</span>
</span></span></code></pre></td></tr></table></div></div><a href=#yum><h2 id=yum><span class=hanchor arialabel=Anchor># </span>yum</h2></a><p>YUM（全称为 Yellow dog Updater, Modified）是一个在Fedora和RedHat以及CentOS中的Shell前端软件包管理器。基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装，</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>yum <span class=o>[</span>options<span class=o>]</span> <span class=o>[</span>command<span class=o>]</span> <span class=o>[</span>package ...<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>**options：**可选，选项包括-h（帮助），-y（当安装过程提示选择全部为"yes"），-q（不显示安装的过程）等等。</li><li>**command：**要进行的操作。</li><li><strong>package</strong>：操作的对象。</li></ul><table><thead><tr><th>参数</th><th>功能</th></tr></thead><tbody><tr><td>install</td><td>安装rpm软件包</td></tr><tr><td>update</td><td>更新rpm软件包</td></tr><tr><td>check-update</td><td>检查是否有可用的更新rpm软件包</td></tr><tr><td>remove</td><td>删除指定的rpm软件包</td></tr><tr><td>list</td><td>显示软件包信息</td></tr><tr><td>clean</td><td>清理yum过期的缓存</td></tr><tr><td>deplist</td><td>显示yum软件包的所有依赖关系</td></tr></tbody></table><hr><ul><li>列出所有可更新的软件清单命令：yum check-update</li></ul><ul><li>更新所有软件命令：yum update</li><li>仅安装指定的软件命令：yum install &lt;package_name></li><li>仅更新指定的软件命令：yum update &lt;package_name></li><li>列出所有可安裝的软件清单命令：yum list</li><li>删除软件包命令：yum remove &lt;package_name></li><li>查找软件包 命令：yum search <keyword></li><li>清除缓存命令:<ul><li>yum clean packages: 清除缓存目录下的软件包</li><li>yum clean headers: 清除缓存目录下的 headers</li><li>yum clean oldheaders: 清除缓存目录下旧的 headers</li><li>yum clean, yum clean all (= yum clean packages; yum clean oldheaders) :清除缓存目录下的软件包及旧的headers</li></ul></li></ul><a href=#brew><h2 id=brew><span class=hanchor arialabel=Anchor># </span>brew</h2></a><p>brew 是 Mac 下的一个包管理工具，类似于 centos 下的 yum，可以很方便地进行安装/卸载/更新各种软件包，例如：nodejs, elasticsearch, kibana, mysql, mongodb 等等，可以用来快速搭建各种本地环境，程序员必备工具</p><a href=#安装><h3 id=安装><span class=hanchor arialabel=Anchor># </span>安装</h3></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>/usr/bin/ruby -e &#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&#34;
</span></span></code></pre></td></tr></table></div></div><a href=#基本用法><h3 id=基本用法><span class=hanchor arialabel=Anchor># </span>基本用法</h3></a><ul><li><p>安装/卸载/更新
以 nodejs 为例，执行下面命令即可，安装目录在 /usr/local/Cellar</p><p><code>brew install nodejs</code></p></li><li><p>如果需要更新或卸载</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>brew upgrade nodejs
</span></span><span class=line><span class=cl>brew remove nodejs
</span></span></code></pre></td></tr></table></div></div><ul><li>其他命令</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew list                   <span class=c1># 列出当前安装的软件</span>
</span></span><span class=line><span class=cl>brew search nodejs          <span class=c1># 查询与 nodejs 相关的可用软件</span>
</span></span><span class=line><span class=cl>brew info nodejs            <span class=c1># 查询 nodejs 的安装信息</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>如果需要指定版本，可以在 brew search 查看有没有需要的版本，在 @ 后面指定版本号，例如 brew install
<a rel=noopener class="internal-link broken" data-src=mailto:thrift@0.9>thrift@0.9</a></li></ul><a href=#brew-services><h3 id=brew-services><span class=hanchor arialabel=Anchor># </span>brew services</h3></a><ul><li>brew services 是一个非常强大的工具，可以用来管理各种服务的启停，有点像 linux 里面的 services，非常方便，以 elasticsearch 为例</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew install elasticsearch          <span class=c1># 安装 elasticsearch</span>
</span></span><span class=line><span class=cl>brew services start elasticsearch   <span class=c1># 启动 elasticsearch</span>
</span></span><span class=line><span class=cl>brew services stop elasticsearch    <span class=c1># 停止 elasticsearch</span>
</span></span><span class=line><span class=cl>brew services restart elasticsearch <span class=c1># 重启 elasticsearch</span>
</span></span><span class=line><span class=cl>brew services list                  <span class=c1># 列出当前的状态</span>
</span></span></code></pre></td></tr></table></div></div><a href=#brew-services-服务相关配置以及日志路径><h3 id=brew-services-服务相关配置以及日志路径><span class=hanchor arialabel=Anchor># </span>brew services 服务相关配置以及日志路径</h3></a><p>配置路径：/usr/local/etc/
日志路径：/usr/local/var/log</p><a href=#systemctl><h2 id=systemctl><span class=hanchor arialabel=Anchor># </span>systemctl</h2></a><p>从CentOS 7.x开始，CentOS开始使用systemd服务来代替daemon，</p><p>原来管理系统启动和管理系统服务的相关命令全部由systemctl命令来代替。</p><a href=#原来的-service-命令与-systemctl-命令对比><h4 id=原来的-service-命令与-systemctl-命令对比><span class=hanchor arialabel=Anchor># </span>原来的 service 命令与 systemctl 命令对比</h4></a><table><thead><tr><th>daemon命令</th><th>systemctl命令</th><th>说明</th></tr></thead><tbody><tr><td>service [服务] start</td><td>systemctl start [unit type]</td><td>启动服务</td></tr><tr><td>service [服务] stop</td><td>systemctl stop [unit type]</td><td>停止服务</td></tr><tr><td>service [服务] restart</td><td>systemctl restart [unit type]</td><td>重启服务</td></tr></tbody></table><a href=#此外还是二个systemctl参数没有与service命令参数对应><h4 id=此外还是二个systemctl参数没有与service命令参数对应><span class=hanchor arialabel=Anchor># </span><strong>此外还是二个systemctl参数没有与service命令参数对应</strong></h4></a><ul><li>status：参数来查看服务运行情况</li><li>reload：重新加载服务，加载更新后的配置文件（并不是所有服务都支持这个参数，比如network.service）</li></ul><p>应用举例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#启动网络服务</span>
</span></span><span class=line><span class=cl>systemctl start network.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#停止网络服务</span>
</span></span><span class=line><span class=cl>systemctl stop network.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#重启网络服务</span>
</span></span><span class=line><span class=cl>systemctl restart network.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#查看网络服务状态</span>
</span></span><span class=line><span class=cl>systemctl status network.serivce
</span></span></code></pre></td></tr></table></div></div><a href=#原来的chkconfig-命令与-systemctl-命令对比><h4 id=原来的chkconfig-命令与-systemctl-命令对比><span class=hanchor arialabel=Anchor># </span>原来的chkconfig 命令与 systemctl 命令对比</h4></a><a href=#设置开机启动不启动><h4 id=设置开机启动不启动><span class=hanchor arialabel=Anchor># </span>设置开机启动/不启动</h4></a><table><thead><tr><th>daemon命令</th><th>systemctl命令</th><th>说明</th></tr></thead><tbody><tr><td>chkconfig [服务] on</td><td>systemctl enable [unit type]</td><td>设置服务开机启动</td></tr><tr><td>chkconfig [服务] off</td><td>systemctl disable [unit type]</td><td>设备服务禁止开机启动</td></tr></tbody></table><p>应用举例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#停止cup电源管理服务</span>
</span></span><span class=line><span class=cl>systemctl stop cups.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#禁止cups服务开机启动</span>
</span></span><span class=line><span class=cl>systemctl disable cups.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#查看cups服务状态</span>
</span></span><span class=line><span class=cl>systemctl status cups.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#重新设置cups服务开机启动</span>
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> cups.service
</span></span></code></pre></td></tr></table></div></div><a href=#查看系统上上所有的服务><h4 id=查看系统上上所有的服务><span class=hanchor arialabel=Anchor># </span>查看系统上上所有的服务</h4></a><p>命令格式：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl <span class=o>[</span>command<span class=o>]</span> <span class=o>[</span>–type<span class=o>=</span>TYPE<span class=o>]</span> <span class=o>[</span>–all<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>参数详解：</p><p>command – list-units：依据unit列出所有启动的unit。加上 –all 才会列出没启动的unit; – list-unit-files:依据/usr/lib/systemd/system/ 内的启动文件，列出启动文件列表</p><p>–type=TYPE – 为unit type, 主要有service, socket, target</p><p>应用举例：</p><table><thead><tr><th>systemctl命令</th><th>说明</th></tr></thead><tbody><tr><td>systemctl</td><td>列出所有的系统服务</td></tr><tr><td>systemctl list-units</td><td>列出所有启动unit</td></tr><tr><td>systemctl list-unit-files</td><td>列出所有启动文件</td></tr><tr><td>systemctl list-units –type=service –all</td><td>列出所有service类型的unit</td></tr><tr><td>systemctl list-units –type=service –all grep cpu</td><td>列出 cpu电源管理机制的服务</td></tr><tr><td>systemctl list-units –type=target –all</td><td>列出所有target</td></tr></tbody></table><a href=#systemctl特殊的用法><h4 id=systemctl特殊的用法><span class=hanchor arialabel=Anchor># </span>systemctl特殊的用法</h4></a><table><thead><tr><th>systemctl命令</th><th>说明</th></tr></thead><tbody><tr><td>systemctl is-active [unit type]</td><td>查看服务是否运行</td></tr><tr><td>systemctl is-enable [unit type]</td><td>查看服务是否设置为开机启动</td></tr><tr><td>systemctl mask [unit type]</td><td>注销指定服务</td></tr><tr><td>systemctl unmask [unit type]</td><td>取消注销指定服务</td></tr></tbody></table><p>应用举例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#查看网络服务是否启动</span>
</span></span><span class=line><span class=cl>systemctl is-active network.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#检查网络服务是否设置为开机启动</span>
</span></span><span class=line><span class=cl>systemctl is-enable network.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#停止cups服务</span>
</span></span><span class=line><span class=cl>systemctl stop cups.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#注销cups服务</span>
</span></span><span class=line><span class=cl>systemctl mask cups.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#查看cups服务状态</span>
</span></span><span class=line><span class=cl>systemctl status cups.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#取消注销cups服务</span>
</span></span><span class=line><span class=cl>systemctl unmask cups.service
</span></span></code></pre></td></tr></table></div></div><a href=#nohup><h2 id=nohup><span class=hanchor arialabel=Anchor># </span>nohup</h2></a><p>$ nohup java -jar test.jar >temp.txt &</p><p><strong>注意没成功可能是没有在文件路径下</strong></p><p>//这种方法会把日志文件输入到你指定的文件中，没有则会自动创建。进程会在后台运行。
然后输入 cat temp.txt 查看结果</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://jieye-ericx.github.io/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by Jieye ericx using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://jieye-ericx.github.io/>Home</a></li><li><a href=https://github.com/jieye-ericx>Github</a></li></ul></footer></div></div></body></html>